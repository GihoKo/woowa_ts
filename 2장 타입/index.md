# 2장 타입

-   타입스크립트는 정적 타이핑을 제공함
-   타입스크립트가 제공하는 타입과 관련된 내용을 살펴본다

## 2.1 타입이란

1. 자료형으로서의 타입
    - 메모리의 관점에서 데이터 타입은 프로그래밍 언어에서 일반적으로 타입으로 부르는 개념과 같음
    - 컴퓨터의 메모리 공간은 한정적
        - 특정 메모리에 값을 효율적으로 저장하기 위해서 먼저 해당 메모리 공간을 차지할 값의 크기를 알아야한다
    - 개발자는 타입을 사용해서 값의 종류를 명시할 수 있고, 메모리를 더욱 효율적으로 사용 가능
2. 집합으로서의 타입
    - 타입은 값이 가질 수 있는 유효한 범위의 집합을 의미
    - 타입 시스템은 유요한 값의 범위를 제한해서 런타임에서 발생할 수 있는 유효하지 않은 값에 대한 에러를 방지해줌
3. 정적 타입과 동적 타입
    - 정적 타입
        - 컴파일타임에 모든 변수의 타입이 결정
        - 개발자가 타입을 명시
    - 동적 타입
        - 변수 타입이 런타임에 결정
    - 컴파일 타임과 런타임
        - 컴파일 타임
            - 기계가 소스코드를 이해할 수 있도록 기계어로 변환되는 시점
        - 런타임
            - 변환된 파일이 메모리에 적재돼 실행되는 시점
4. 강타입과 약타입
    - 강타입(strongly type)
        - 서로 다른 타입을 갖는 값끼리 연산 시도시 컴파일, 인터프리터에서 에러 발생
    - 약타입(weakly type)
        - 컴파일러, 인터프리터가 내부적으로 판단해 특정 값의 타입을 변환(암묵적 타입 변환)
    - 타입 시스템
        - TS는 명시적으로 타입 지정, 컴퓨터가 추론 둘 다 가능
5. 컴파일 방식
    - 컴파일
        - 고수준 언어에서 저수준 언어로
        - TS를 컴파일하면 타입이 모두 제거된 JS 소스 코드만 남는다

## 2.2 타입스크립트의 타입 시스템

1. 타입 에너테이션(type annotation) 방식
    - 변수나 상수, 함수의 인자와 반환 값에 타입을 명시적으로 선언
2. 구조적 타이핑
    - 이름으로 타입을 구분하는 명목적인 타입과 달리 타입스크립트는 **구조**로 타입을 구분한다.
3. 구조적 서브 타이핑

    - 객체가 가지고 있는 속성(프로퍼티)를 바탕으로 타입을 구분하는 것이다.
    - 이름이 다른 객체라도 가진 속성이 동일하면 타입스크립트는 서로 호환이 가능한 동일한 타입으로 여김

    ```jsx
    interface Pet {
        name: string;
    }

    interface Cat {
        name: string;
        age: number;
    }

    let pet: Pet;
    let cat: Cat = { name: "Tom", age: 7 };

    pet = cat; // OK
    ```

    - 함수의 매개 변수와 타입의 상속 역시 구조적 타이핑을 기반으로 하고 있다.
    - 서로 다른 두 타입 간의 호환성은 오로지 타입 내부의 구조에 의해 결정된다.
    - 타입 A가 타입B의 서브타입이라면 A 타입의 인스턴스는 B 타입이 필요한 곳에 언제든지 위치할 수 있다.

4. 자바스크립트를 닮은 타입스크립트
    - 덕 타이핑
        - 자바스크립트
        - 객체가 필요한 메서드나 속성을 가지고 있을 때 사용이 가능하다고 여기는 것
            - duck 안에 quack 이라는 메서드가 있으면 `duck.quack()` 을 사용 가능하다
        - 런타임에 타입 검사
    - 구조적 타이핑
        - 타입스크립트
        - 객체의 구조가 타입과 일치하면 그 객체를 해당 타입으로 간주함
            - Duck이라는 interface안에 quack이라는 메서드만 있다.
            - duck이라는 객체안에 Duck이라는 interface의 quack이라는 메서드만 있다.
            - 그러면 duck은 Duck타입이다.
        - 컴파일타입에 타입체커가 타입 검사
5. 구조적 타이핑의 결과
    - 구조적 타이핑의 특징 때문에 예기치 못한 결과가 나올 때도 있음
        - 유니온같은 방법이 생겨남
6. 타입스크립트의 점진적 타입 확인
    - 컴파일 타임에 타입을 검사하면서 필요에 따라 타입 선언 생략을 허용하는 방식
    - 타입 지정 → 정적 타입 검사
    - 타입 지정 X → 동적 타입 검사 → 암시적 타입 변환
7. 자바스크립트 슈퍼셋으로서의 타입스크립트
    - 타입스크립트는 자바스크립트 + a 인 자바스크립트의 슈퍼셋이다.
        - 따라서 자바스크립트의 문법을 모두 포함하고 추가적인 기능을 가지고 있음
        - 예를들어 `: sting`을 붙이는 타입 구문이나 `String.toUppercase()`를 사용할 때 컴파일 타임에 에러를 내주는 기능들
8. 값 vs 타입
    - 타입스크립트에서는 값과 타입이 함께 사용된다,
        - 별도의 네임스페이승 존재하는데 값과 타입이 사용되는 위치가 다르기 때문에 타입스크립트가 값인지 타입인지 추론 가능하다.
    - 값과 타입의 공간이 애매한 경우
        - 클래스
            ```jsx
            class Developer {
                name: string;
                domain: string;

                constructor(name: string, domain: string) {
                    this.name = name;
                    this.domain = domain;
                }
            }

            const me: Developer = new Developer("John", "Web Development");
            ```
            - 변수명 me의 `: Developer`는 타입에 해당하고, new 키워드 뒤의 `Developer`는 클래스의 생성자 함수인 값으로 동작한다.
            - 마찬가지로 타입 애너테이션으로 사용할 수 있지만 컴파일 단계에서 사라진다.

## 2.3 원시 타입

-   자바스크립트에서 값은 가지지만 변수는 별도의 타입을 가지지 않는다
    -   따라서 자바스크립트에서 변수는 어떠한 타입의 값이라도 자유롭게 할당 될 수 있다.
-   타입스크립트는 변수에 타입을 지정할 수 있는 타입 시스템 체계를 구축한다.
    -   특정 타입을 지정한 변수에 해당 타입의 값만 할당할 수 있음.

1. boolean
    - 오직 true와 false 값만 할당 할 수 있다.
        - 따라서 Truthy / Falsy 값은 불가능하다.
2. undefined
    - 값이 초기화 되지 않았다는 값
    - `job? : String;` 처럼 옵셔널로 지정할 때도 할당 가능
3. null

    - 값이 비어있다고 명시적으로 나타낼때 사용

    ```jsx
    type Person1 = {
        name: string,
        job?: string,
    };

    type Person2 = {
        name: string,
        job: string | null,
    };
    ```

    - Person1에는 job이라는 속성이 있을 수도 없을 수도 있음
    - Person2에는 job이 있을 수도, 무직일 수도 있음

4. number
    - bigInt를 제외한 자바스크립트의 숫자에 해당하는 모든 원시 값을 할당 가능
        - NaN, Infinity 이런 것도 모두 가능
5. bigInt
    - ES2020에서 새롭게 도입, 이전 JS의 가장 큰수인 Number.MAX_SAFE_INTERGER(2^53-1)보다 큰값을 처리 가능하다.
    - number 값과 상호작용 불간
6. string
    - 문자열
        - 공백, 따옴표, 템플릿 리터럴 포함
7. symbol
    - ES2015에서 도입된 데이터 타입, 어떤 값과도 중복되지 않는 유일한 값을 생성가능

## 2.4 객체 타입

앞에서 언급한 7가지 원시 타입에 속하지 않는 값은 모두 객체 타입으로 분류

1. object
    - 가급적 사용하지 말기
        - any타입과 비슷하게 객체에 해당하는 모든 타입 값을 유동적으로 할당할 수 있어서
        - 그래서 실무에서 잘 안쓴다
2. {}
    - 객체를 타이필 할 때도 사용
    - 빈 객체를 생성하기 위해서 `{}` 사용가능
        - 근데 유틸리티 타입으로 `Record<string, never>` 처럼 사용하는 게 바람직 함
3. array
    - 하나의 타입 값만 가질 수 있고, 원소 개수는 타입에 영향을 주지 않는다
        - vs tuple
            - tuple은 대괄호 내부에서는 선언 시점에 지정해준 타입 값만 할당할 수 있음.
            - 원소 개수도 타입 선언 시점에 미리 정해짐
4. type과 interface 키워드
    - 객체를 타이핑하기 위해서 자주 사용하는 키워드
5. function
    - 주의점
        - JS 에서 typeof 연산자로 확인한 function 키워드 자체를 타입으로 사용 안함
        - 함수의 매개 변수와 리턴 값에 대한 타이핑이 필요하다
        ```jsx
        function add(a: number, b: number): number {
            return a + b;
        }
        ```
    - 함수 자체의 타입을 지정하는 방법
        - 호출 시그니쳐
